!function(e,t,a){"function"==typeof define&&define.amd?define(["jquery","fecha"],e):"object"==typeof exports?module.exports=e(require("jquery"),require("fecha")):e(t,a)}(function(e,t){function a(e,t){var a=[];return Array.from?Array.from(e).slice(t||0):("number"!=typeof t||isNaN(t)||a.push(t),a.slice.apply(e,a))}function n(e){return"string"==typeof e}function r(e){return"object"==typeof e&&e instanceof Date}t=t?t:function(){function e(e,t){for(var a=[],n=0,r=e.length;n<r;n++)a.push(e[n].substr(0,t));return a}function t(e){return function(t,a,n){var r=n[e].indexOf(a.charAt(0).toUpperCase()+a.substr(1).toLowerCase());~r&&(t.month=r)}}function a(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e}var n={},r=/d{1,4}|M{1,4}|yy(?:yy)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,i=/\d\d?/,l=/\d{3}/,o=/\d{4}/,d=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,s=function(){},m=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],c=["January","February","March","April","May","June","July","August","September","October","November","December"],g=e(c,3),u=e(m,3);n.i18n={dayNamesShort:u,dayNames:m,monthNamesShort:g,monthNames:c,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!==10)*e%10]}};var p={D:function(e){return e.getDay()},DD:function(e){return a(e.getDay())},Do:function(e,t){return t.DoFn(e.getDate())},d:function(e){return e.getDate()},dd:function(e){return a(e.getDate())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return a(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},yy:function(e){return String(e.getFullYear()).substr(2)},yyyy:function(e){return e.getFullYear()},h:function(e){return e.getHours()%12||12},hh:function(e){return a(e.getHours()%12||12)},H:function(e){return e.getHours()},HH:function(e){return a(e.getHours())},m:function(e){return e.getMinutes()},mm:function(e){return a(e.getMinutes())},s:function(e){return e.getSeconds()},ss:function(e){return a(e.getSeconds())},S:function(e){return Math.round(e.getMilliseconds()/100)},SS:function(e){return a(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return a(e.getMilliseconds(),3)},a:function(e,t){return e.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(e,t){return e.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+a(100*Math.floor(Math.abs(t)/60)+Math.abs(t)%60,4)}},h={d:[i,function(e,t){e.day=t}],M:[i,function(e,t){e.month=t-1}],yy:[i,function(e,t){var a=new Date,n=+(""+a.getFullYear()).substr(0,2);e.year=""+(t>68?n-1:n)+t}],h:[i,function(e,t){e.hour=t}],m:[i,function(e,t){e.minute=t}],s:[i,function(e,t){e.second=t}],yyyy:[o,function(e,t){e.year=t}],S:[/\d/,function(e,t){e.millisecond=100*t}],SS:[/\d{2}/,function(e,t){e.millisecond=10*t}],SSS:[l,function(e,t){e.millisecond=t}],D:[i,s],ddd:[d,s],MMM:[d,t("monthNamesShort")],MMMM:[d,t("monthNames")],a:[d,function(e,t,a){var n=t.toLowerCase();n===a.amPm[0]?e.isPm=!1:n===a.amPm[1]&&(e.isPm=!0)}],ZZ:[/[\+\-]\d\d:?\d\d/,function(e,t){var a,n=(t+"").match(/([\+\-]|\d\d)/gi);n&&(a=+(60*n[1])+parseInt(n[2],10),e.timezoneOffset="+"===n[0]?a:-a)}]};return h.DD=h.DD,h.dddd=h.ddd,h.Do=h.dd=h.d,h.mm=h.m,h.hh=h.H=h.HH=h.h,h.MM=h.M,h.ss=h.s,h.A=h.a,n.masks={default:"ddd MMM dd yyyy HH:mm:ss",shortDate:"M/D/yy",mediumDate:"MMM d, yyyy",longDate:"MMMM d, yyyy",fullDate:"dddd, MMMM d, yyyy",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},n.format=function(e,t,a){var i=a||n.i18n;if("number"==typeof e&&(e=new Date(e)),"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))throw new Error("Invalid Date in fecha.format");return t=n.masks[t]||t||n.masks.default,t.replace(r,function(t){return t in p?p[t](e,i):t.slice(1,t.length-1)})},n.parse=function(e,t,a){var i=a||n.i18n;if("string"!=typeof t)throw new Error("Invalid format in fecha.parse");if(t=n.masks[t]||t,e.length>1e3)return!1;var l=!0,o={};if(t.replace(r,function(t){if(h[t]){var a=h[t],n=e.search(a[0]);~n?e.replace(a[0],function(t){return a[1](o,t,i),e=e.substr(n+t.length),t}):l=!1}return h[t]?"":t.slice(1,t.length-1)}),!l)return!1;var d=new Date;o.isPm===!0&&null!=o.hour&&12!==+o.hour?o.hour=+o.hour+12:o.isPm===!1&&12===+o.hour&&(o.hour=0);var s;return null!=o.timezoneOffset?(o.minute=+(o.minute||0)-+o.timezoneOffset,s=new Date(Date.UTC(o.year||d.getFullYear(),o.month||0,o.day||1,o.hour||0,o.minute||0,o.second||0,o.millisecond||0))):s=new Date(o.year||d.getFullYear(),o.month||0,o.day||1,o.hour||0,o.minute||0,o.second||0,o.millisecond||0),s},n}();var i=864e5,l="HH:mm:ss",o="00:00:00",d=2008,s=2010,m=154,c=13,g=function(t,a){var g=this,u={defaults:{readonly:!1,disabled:!1,type:"date",format:"yyyy-MM-dd",placeholder:"Please pick a day",align:"left",startDate:null,endDate:null,lang:"en-US",rangeSeparator:"-",defaultValue:"",zIndex:d,onChange:null,onShow:null,onHide:null},_init:function(){g=e.extend(!0,g,u.defaults,a||{}),g.lang&&(g=e.extend(g,e.fn.datepicker.lang[g.lang]));var n=g.type;"datetime"!==n&&"datetime-range"!==n||g.format!==u.defaults.format?"year"===n?g.format="yyyy":"month"===n&&g.format===u.defaults.format&&(g.format="yyyy-MM"):g.format="yyyy-MM-dd HH:mm:ss",g.date=new Date,g.value="",g.yearLabel=g.date.getFullYear(),g.monthLabel=g.date.getMonth(),g.readonly&&t.attr("readonly",!0),g.disabled&&t.attr("disabled",!0),g.placeholder&&t.attr("placeholder",g.placeholder),u._created()},_created:function(){var t,a=g.type,n=g.align,r=g.zIndex,i="center"===n?"50%":"right"===n?"100%":"0",l=e("body");if("date"===a||"month"===a||"year"===a||"datetime"===a?("date"===a||"datetime"===a?g.currentView="dateView":"year"===a?g.currentView="yearView":"month"===a&&(g.currentView="monthView"),t=u._generateDateDOM()):"date-range"!==a&&"datetime-range"!==a||(t=u._generateRangeDateDOM()),g.$pickerPanel=e(t).appendTo(l).css({position:"absolute",zIndex:parseInt(r,10),transformOrigin:i+" 0"}),u._setDatePanelPosition(),g.$pickerPanel.find(".gmi-time-panel").length>0){var o=g.$pickerPanel.find(".gmi-time-panel");o.css({width:m+"px",position:"absolute",left:0,zIndex:s}),g.$timePanel=o}switch(u._setDate(g.defaultValue),a){case"date":g.$pickerPanel.find(".gmi-date-table").show().siblings().hide();break;case"datetime":g.$pickerPanel.find(".gmi-date-table").show().siblings().hide();break;case"year":g.$pickerPanel.find(".gmi-year-table").show().siblings().hide();break;case"month":g.$pickerPanel.find(".gmi-month-table").show().siblings().hide()}u._echoDateOrTimeIntoInput(),u._bindEvent()},_unCreate:function(){var e=g.$pickerPanel;e&&e.length>0&&e.remove()},_bindEvent:function(){e(document).on("click.datepicker",function(){u._hidePickerPanel()}),e(window).on("resize.datepicker",function(){u._setDatePanelPosition()}),t.on("focus.datepicker",u._elFocusHandler).on("click.datepicker",u._elClickHandler).on("change.datepicker",u._elChangeHandler).on("keyup.datepicker",u._elKeyUpHandler),g.$pickerPanel.on("click.datepicker",function(e){e.stopPropagation()}),g.$pickerPanel.on("focus.datepicker",".gmi-time-picker--input",function(t){var a=e(this);u._setTimeView(a,t)}).on("keyup.datepicker",".gmi-time-picker--input",function(t){var a=e(this);u._setTimeView(a,t)}).on("change.datepicker",".gmi-time-picker--input",function(t){var a=e(this);u._setTimeView(a,t)}),g.$timePanel&&g.$timePanel.length>0&&(g.$timePanel.on("mouseenter.datepicker",".gmi-time-panel__body__item",function(t){var a=e(this),n=a.find("> ul.gmi-time-panel__body__item--spinner");a.css("overflow","auto"),n.css("width","100%")}).on("mouseleave.datepicker",".gmi-time-panel__body__item",function(t){var a=e(this),n=a.find("> ul.gmi-time-panel__body__item--spinner"),r=a.outerWidth();a.css("overflow","hidden"),n.css("width",r+"px")}),g.$timePanel.on("click.datepicker",".gmi-time-panel__body__item--spinner__item:not(.disabled)",function(t){var a=e(this),n=a.parents(".gmi-time-panel__body__item").eq(0),r=(a.parents(".gmi-time-panel__body__item--spinner").data("role"),Number(a.text())),i=a.outerHeight(),l=r*i;a.addClass("active").siblings().removeClass("active"),n.scrollTop(l),t.stopPropagation()}),g.$timePanel.on("click.datepicker",".gmi-time-panel__btn",function(t){var a=e(this),n=a.data("role"),r=new Date,i=e(t.delegateTarget),o=i.siblings(".gmi-time-picker--input"),d=i.find('.gmi-time-panel__body__item--spinner[data-role="hour"]'),s=i.find('.gmi-time-panel__body__item--spinner[data-role="min"]'),m=i.find('.gmi-time-panel__body__item--spinner[data-role="sec"]'),c=Number(d.find("> li.active").text()),u=Number(s.find("> li.active").text()),p=Number(m.find("> li.active").text());switch(r.setHours(c,u,p,0),n){case"confirm":o.val(e.formatDate(r,l)),i.hide();var h=g.$pickerPanel.find(".gmi-time-picker--input").filter(function(){return""===e(this).val()||!e.parseDate(e(this).val(),l)});h&&0===h.length&&g.$pickerPanel.find(".gmi-picker-panel__link-btn--determine").removeClass("disabled");break;case"cancel":i.hide()}})),g.$pickerPanel.on("click.datepicker","td:not(.disabled)",function(t){var a,n,r=g.type,i=g.format,d=e(t.delegateTarget),s=d.find(".gmi-picker-panel__link-btn--determine"),m=e(this);if(t.stopPropagation(),"date"===r||"datetime"===r){var c,p,h=g.currentView;if("dateView"===h){var f=m.text()===g.todaySuffix?(new Date).getDate():Number(m.text());if(m.hasClass("prev-month")||m.hasClass("next-month")?(m.hasClass("prev-month")?(c=g.monthLabel-1<0?g.yearLabel-1:g.yearLabel,p=g.monthLabel-1<0?11:g.monthLabel-1):m.hasClass("next-month")&&(c=g.monthLabel+1>11?g.yearLabel+1:g.yearLabel,p=g.monthLabel+1>11?0:g.monthLabel+1),"date"===r?(n=e.formatDate(new Date(c,p,f),i),u._setDate(n)):(n=e.formatDate(new Date(c,p,f)),u._setNewDateDOM(d,c,p,f),d.find(".gmi-date-table td").removeClass("current").filter(function(){return Number(e(this).data("year"))===c&&Number(e(this).data("month"))===p&&Number(e(this).text())===f}).addClass("current"),g.yearLabel=c,g.monthLabel=p)):(c=g.yearLabel,p=g.monthLabel,"date"===r?(n=e.formatDate(new Date(c,p,f),i),u._setDate(n)):(n=e.formatDate(new Date(c,p,f)),d.find(".gmi-date-table").find("td").removeClass("current"),m.addClass("current"))),"datetime"===r)return d.find(".gmi-date-picker--input").val(n),a=d.find(".gmi-time-picker--input"),""!==a.val()&&e.parseDate(a.val(),l)||a.val(o),s.removeClass("disabled"),!1;u._hidePickerPanel()}else"yearView"===h?u._setYearView(m):u._setMonthView(m)}else if("month"===r)switch(g.currentView){case"monthView":u._setMonthView(m);break;case"yearView":u._setYearView(m)}else if("year"===r)u._setYearView(m);else if("date-range"===r||"datetime-range"===r){var _,D=g.minDate,b=g.maxDate,y=d.find('.gmi-date-picker--input[data-role="range-start"]'),v=d.find('.gmi-time-picker--input[data-role="range-start"]'),k=d.find('.gmi-date-picker--input[data-role="range-end"]'),w=d.find('.gmi-time-picker--input[data-role="range-end"]');c=Number(m.data("year")),p=Number(m.data("month")),f=m.text()===g.todaySuffix?(new Date).getDate():Number(m.text()),D&&b?(g.minDate=new Date(c,p,f),g.maxDate=null,d.find(".gmi-date-table td").removeClass("start-date in-range end-date"),m.hasClass("prev-month")||m.hasClass("next-month")||m.addClass("start-date in-range"),"datetime-range"===r&&(y.val(e.formatDate(g.minDate)),s.addClass("disabled"))):D&&!b?new Date(c,p,f).getTime()<D.getTime()?(g.minDate=new Date(c,p,f),d.find(".gmi-date-table td").removeClass("start-date in-range"),m.hasClass("prev-month")||m.hasClass("next-month")||m.addClass("start-date in-range"),"datetime-range"===r&&(y.val(e.formatDate(g.minDate)),s.addClass("disabled"))):(g.maxDate=new Date(c,p,f),m.hasClass("prev-month")||m.hasClass("next-month")||m.addClass("end-date in-range"),d.find(".gmi-date-table td").filter(function(){var t=e(this),a=Number(t.data("year")),n=Number(t.data("month")),r=t.text()===g.todaySuffix?(new Date).getDate():Number(t.text()),i=new Date(a,n,r);return!t.hasClass("prev-month")&&!t.hasClass("next-month")&&i>g.minDate.getTime()&&i.getTime()<g.maxDate.getTime()}).addClass("in-range"),"date-range"===r?(_=e.formatDate(g.minDate,i)+" "+g.rangeSeparator+" "+e.formatDate(g.maxDate,i),u._setDate(_),u._hidePickerPanel()):(k.val(e.formatDate(g.maxDate)),""===v.val()&&v.val(o),""===w.val()&&w.val(o),s.removeClass("disabled"))):D||(g.minDate=new Date(c,p,f),m.hasClass("prev-month")||m.hasClass("next-month")||m.addClass("start-date in-range"),"datetime-range"===r&&(y.val(e.formatDate(g.minDate)),s.addClass("disabled")))}}),g.$pickerPanel.on("click.datepicker",".gmi-date-picker__header__label--month",function(t){var a=e(this),n=a.siblings(".gmi-date-picker__header__label--year"),r=e(t.delegateTarget),i=r.find(".gmi-month-table"),l=g.yearLabel,o=g.monthLabel;i.find("td").removeClass("current").eq(Number(o)).hasClass("disabled")||i.find("td").removeClass("current").eq(Number(o)).addClass("current"),n.text(l+" "+g.yearSuffix),a.hide(),u._setNewMonthDOM(r,o),g.currentView="monthView",t.stopPropagation()}),g.$pickerPanel.on("click.datepicker",".gmi-date-picker__header__label--year",function(t){if("yearView"===g.currentView)return!1;var a=e(this),n=a.siblings(".gmi-date-picker__header__label--month"),r=e(t.delegateTarget),i=g.yearLabel;u._setNewYearDOM(r,i,a),n.hide(),g.currentView="yearView",t.stopPropagation()}),g.$pickerPanel.on("click.datepicker",".gmi-date-picker__header__icon-btn",function(t){var a=e(t.delegateTarget),n=e(this),r=n.data("action"),i=g.currentView;switch(r){case"prev":u._setPrevButtonAction(a,i);break;case"next":u._setNextButtonAction(a,i)}t.stopPropagation()}),g.$pickerPanel.on("click.datepicker",".gmi-picker-panel__link-btn:not(.gmi-time-panel__btn)",function(t){var a,n,r,i,d,s,m,c,p,h,f,_,D,b,y,v=e(this),k=e(t.delegateTarget),w=v.data("role"),M=g.type;switch(w){case"determine":if(v.hasClass("disabled"))return!1;"datetime"===M?(a=k.find(".gmi-date-picker--input").val(),n=k.find(".gmi-time-picker--input").val(),r=e.parseDate(a),i=e.parseDate(n,l),r.setHours(i.getHours(),i.getMinutes(),i.getSeconds(),0),y=e.formatDate(r,g.format)):"datetime-range"===M&&(d=k.find('.gmi-date-picker--input[data-role="range-start"]').val(),s=k.find('.gmi-time-picker--input[data-role="range-start"]').val(),m=e.parseDate(d),c=e.parseDate(""!==s?s:o,l),m.setHours(c.getHours(),c.getMinutes(),c.getSeconds(),0),p=e.formatDate(m,g.format),h=k.find('.gmi-date-picker--input[data-role="range-end"]').val(),f=k.find('.gmi-time-picker--input[data-role="range-end"]').val(),_=e.parseDate(h),D=e.parseDate(""!==f?f:o,l),_.setHours(D.getHours(),D.getMinutes(),D.getSeconds(),0),b=e.formatDate(_,g.format),y=p+" "+g.rangeSeparator+" "+b),u._setDate(y),u._hidePickerPanel();break;case"now":y=e.formatDate(new Date,g.format),u._setDate(y),u._hidePickerPanel();break;case"clear":u._clear()}t.stopPropagation()}),g.$pickerPanel.on("click.datepicker",".gmi-date-range-picker__header__icon-btn",function(t){var a=e(t.delegateTarget),n=e(this),r=n.data("action");u._setRangeDateView(a,r),t.stopPropagation()}),g.$pickerPanel.on("mouseenter.datepicker","td:not(.disabled)",function(t){if("date-range"!==g.type&&"datetime-range"!==g.type)return!1;var a=e(t.delegateTarget),n=e(this),r=Number(n.data("year")),i=Number(n.data("month")),l=n.text()===g.todaySuffix?(new Date).getDate():Number(n.text()),o=new Date(r,i,l),d=g.minDate,s=g.maxDate;d&&!s&&(g.$minDateTarget=a.find(".gmi-date-table td").filter(function(){return!e(this).hasClass("prev-month")&&!e(this).hasClass("next-month")&&Number(e(this).data("year"))===d.getFullYear()&&Number(e(this).data("month"))===d.getMonth()&&(e(this).text()===g.todaySuffix?(new Date).getDate():Number(e(this).text()))===d.getDate()}),g.$minDateTarget.hasClass("start-date")||g.$minDateTarget.addClass("in-range start-date"),o.getTime()>=d.getTime()&&(a.find(".gmi-date-table td").filter(function(){var t=Number(e(this).data("year")),a=Number(e(this).data("month")),n=e(this).text()===g.todaySuffix?(new Date).getDate():Number(e(this).text());return!e(this).hasClass("prev-month")&&!e(this).hasClass("next-month")&&new Date(t,a,n).getTime()>d.getTime()&&new Date(t,a,n).getTime()<new Date(r,i,l).getTime()}).addClass("in-range"),n.hasClass("prev-month")||n.hasClass("next-month")?a.find(".gmi-date-table td").filter(function(){var t=Number(e(this).data("year")),a=Number(e(this).data("month")),n=e(this).text()===g.todaySuffix?(new Date).getDate():Number(e(this).text());return!e(this).hasClass("prev-month")&&!e(this).hasClass("next-month")&&t===r&&a===i&&n===l}).addClass("in-range end-date"):n.addClass("in-range end-date"))),t.stopPropagation()}).on("mouseleave.datepicker","td:not(.disabled)",function(t){if("date-range"!==g.type&&"datetime-range"!==g.type)return!1;var a=e(t.delegateTarget),n=e(this),r=Number(n.data("year")),i=Number(n.data("month")),l=n.text()===g.todaySuffix?(new Date).getDate():Number(n.text()),o=g.minDate,d=g.maxDate;o&&!d&&(a.find(".gmi-date-table td").filter(function(){return!e(this).hasClass("start-date")&&!e(this).hasClass("end-date")}).removeClass("in-range"),n.hasClass("prev-month")||n.hasClass("next-month")?a.find(".gmi-date-table td").filter(function(){var t=Number(e(this).data("year")),a=Number(e(this).data("month")),n=e(this).text()===g.todaySuffix?(new Date).getDate():Number(e(this).text());return!e(this).hasClass("prev-month")&&!e(this).hasClass("next-month")&&t===r&&a===i&&n===l}).removeClass("in-range end-date"):n.removeClass("in-range end-date")),t.stopPropagation()})},_unBindEvent:function(){t.off("focus.datepicker",u._elFocusHandler),t.off("click.datepicker",u._elClickHandler),t.off("change.datepicker",u._elChangeHandler),t.off("keyup.datepicker",u._elKeyUpHandler)},_generateDateDOM:function(){var e=g.type,t="datetime"===e?"has-time":"",a="datetime"===e?u._generateDatetimeHeader():"",n="datetime"===e?u._generateDatetimeFooter(e):"",r=10*Math.floor(g.date.getFullYear()/10),i=10*Math.floor(g.date.getFullYear()/10)+9,l="date"===e||"month"===e||"datetime"===e?g.date.getFullYear()+" "+g.yearSuffix:r+" "+g.yearSuffix+" - "+i+" "+g.yearSuffix,o=g.monthsShort[g.date.getMonth()],d="date"===e||"datetime"===e?'<a href="javascript: void (0);" class="gmi-date-picker__header__label--month">'+o+"</a>":"",s='<div data-role="'+e+'" class="gmi-picker-panel gmi-date-picker '+t+'" style="display: none;"><div class="gmi-picker-panel__body">'+a+'<div class="gmi-picker-panel__body__header"><a href="javascript: void (0);" class="gmi-date-picker__header__label--year">'+l+"</a>"+d+'<em data-action="next" class="gmi-date-picker__header__icon-btn gmi-picker-panel__btn--next iconfont icon-arrow-down"></em><em data-action="prev" class="gmi-date-picker__header__icon-btn gmi-picker-panel__btn--prev iconfont icon-arrow-up"></em></div><div class="gmi-picker-panel__body__main">'+u._getDateTable(g.date)+u._getYearTable(g.date.getFullYear())+u._getMonthTable(g.date.getMonth())+"</div></div>"+n+"</div>";return s},_generateRangeDateDOM:function(){var t=g.date,a=g.minDate?g.minDate:t,n=g.minDate?e.getNextMonth(g.minDate):e.getNextMonth(t),r=g.type,i="datetime-range"===r?"has-time":"",l="datetime-range"===r?u._generateRangeDatetimeHeader():"",o="datetime-range"===r?u._generateDatetimeFooter(r):"",d='<div data-role="'+r+'" class="gmi-picker-panel gmi-date-range-picker '+i+'" style="display: none;">'+l+'<div class="gmi-picker-panel__body gmi-date-range-picker__body"><div class="gmi-picker-panel__body__main f-lt"><div class="gmi-date-range-picker__body__header"><p>'+a.getFullYear()+" "+g.yearSuffix+" "+g.monthsShort[a.getMonth()]+'</p><em data-action="prev-year" class="gmi-date-range-picker__header__icon-btn gmi-date-range-picker__btn--prev gmi-date-range-picker__btn--prev-year iconfont icon-double-arrow-left"></em><em data-action="prev-month" class="gmi-date-range-picker__header__icon-btn gmi-date-range-picker__btn--prev gmi-date-range-picker__btn--prev-month iconfont icon-left"></em></div>'+u._getDateTable(a)+'</div><div class="gmi-picker-panel__body__main f-rt"><div class="gmi-date-range-picker__body__header"><p>'+n.getFullYear()+" "+g.yearSuffix+" "+g.monthsShort[n.getMonth()]+'</p><em data-action="next-year" class="gmi-date-range-picker__header__icon-btn gmi-date-range-picker__btn--next gmi-date-range-picker__btn--next-year iconfont icon-double-arrow-right"></em><em data-action="next-month" class="gmi-date-range-picker__header__icon-btn gmi-date-range-picker__btn--next gmi-date-range-picker__btn--next-month iconfont icon-right"></em></div>'+u._getDateTable(n)+"</div></div>"+o+"</div>";return d},_generateDatetimeHeader:function(){var e='<ul class="gmi-picker-panel__body__header--time"><li class="gmi-picker-panel__body__header--time__wrapper"><div class="gmi-input"><input data-role="date" type="text" readonly class="gmi-input__inner gmi-date-picker--input" placeholder="'+g.dateInputPlaceholder+'"></div></li><li class="gmi-picker-panel__body__header--time__wrapper"><div data-role="date" class="gmi-input gmi-time-picker--wrapper"><input data-role="date" type="text" class="gmi-input__inner gmi-time-picker--input" placeholder="'+g.dateTimeInputPlaceholder+'">'+u._generateTimePickerDOM("date")+"</div></li></ul>";return e},_generateRangeDatetimeHeader:function(){var e='<ul class="gmi-picker-panel__body__header--time"><li class="gmi-picker-panel__body__header--time__wrapper gmi-date-range-picker__header--time__wrapper"><div class="gmi-input"><input data-role="range-start" type="text" readonly class="gmi-input__inner gmi-date-picker--input" placeholder="'+g.rangeStartInputPlaceholder+'"></div><div data-role="range-start" class="gmi-input gmi-time-picker--wrapper"><input data-role="range-start" type="text" class="gmi-input__inner gmi-time-picker--input" placeholder="'+g.rangeStartTimeInputPlaceholder+'">'+u._generateTimePickerDOM("range-start")+'</div></li><li class="gmi-picker-panel__body__header--time__wrapper gmi-date-range-picker__header--time__wrapper"><div class="gmi-input"><input data-role="range-end" type="text" readonly class="gmi-input__inner gmi-date-picker--input" placeholder="'+g.rangeEndPlaceholder+'"></div><div data-role="range-end" class="gmi-input gmi-time-picker--wrapper"><input data-role="range-end" type="text" class="gmi-input__inner gmi-time-picker--input" placeholder="'+g.rangeEndTimeInputPlaceholder+'">'+u._generateTimePickerDOM("range-end")+"</div></li></ul>";return e},_generateDatetimeFooter:function(e){var t="datetime-range"===e?g.clearButton:g.nowDateButton,a="datetime-range"===e?"gmi-picker-panel__link-btn--clear":"gmi-picker-panel__link-btn--now",n="datetime-range"===e?"clear":"now",r="datetime-range"===e&&g.minDate&&g.maxDate?"":"datetime"===e?"":"disabled",i='<div class="gmi-picker-panel__footer"><a href="JavaScript:" data-role="'+n+'" class="gmi-picker-panel__link-btn '+a+'">'+t+'</a><a href="JavaScript:" data-role="determine" class="gmi-picker-panel__link-btn gmi-picker-panel__link-btn--determine '+r+'">'+g.confirmDateButton+"</a></div>";return i},_generateTimePickerDOM:function(e){var t='<div data-role="'+e+'" class="gmi-time-panel gmi-time-picker" style="display: none;"><div class="gmi-time-panel__body"><div class="gmi-time-panel__body__item">'+u._getTimeSpinner("hour")+'</div><div class="gmi-time-panel__body__item">'+u._getTimeSpinner("min")+'</div><div class="gmi-time-panel__body__item">'+u._getTimeSpinner("sec")+'</div></div><div class="gmi-picker-panel__footer gmi-time-panel__footer"><a href="JavaScript:" data-role="cancel" class="gmi-picker-panel__link-btn gmi-time-panel__btn gmi-picker-panel__link-btn--default">'+g.cancelTimeButton+'</a><a href="JavaScript:" data-role="confirm" class="gmi-picker-panel__link-btn gmi-time-panel__btn gmi-picker-panel__link-btn--primary">'+g.confirmDateButton+"</a></div></div>";return t},_getDateRows:function(t){var a=[[],[],[],[],[],[]],n=t.getFullYear(),l=t.getMonth(),o=new Date(n,l,1),d=e.getFirstDayOfMonth(o),s=e.getTotalDayCountOfMonth(o.getFullYear(),o.getMonth()),m=e.getTotalDayCountOfMonth(o.getFullYear(),0===o.getMonth()?11:o.getMonth()-1);d=0===d?7:d;for(var c,u=0,p=a,h=1,f=e.getStartDateOfMonth(n,l),_=e.clearHours(new Date),D=0;D<6;D++)for(var b=p[D],y=0;y<7;y++){var v=b[y];v||(v={row:D,column:y,type:"normal",year:o.getFullYear(),month:o.getMonth(),inRange:!1,start:!1,end:!1}),v.type="normal";var k=7*D+y,w=f.getTime()+i*(k-u);v.inRange=w>=e.clearHours(g.minDate)&&w<=e.clearHours(g.maxDate),v.start=g.minDate&&w===e.clearHours(g.minDate),v.end=g.maxDate&&w===e.clearHours(g.maxDate),v.disabled=!1,g.startDate&&r(g.startDate)&&w<e.clearHours(g.startDate)&&(v.disabled=!0),g.endDate&&r(g.endDate)&&w>e.clearHours(g.endDate)&&(v.disabled=!0);var M=w===_;M&&(v.type="today"),D>=0&&D<=1?y+7*D>=d+u?(v.text=h++,2===h&&(c=7*D+y),v.year=o.getFullYear(),v.month=o.getMonth()):(v.text=m-(d+u-y%7)+1+7*D,v.type="prev-month",v.year=0===o.getMonth()?o.getFullYear()-1:o.getFullYear(),v.month=0===o.getMonth()?11:o.getMonth()-1):h<=s?(v.text=h++,2===h&&(c=7*D+y),v.year=o.getFullYear(),v.month=o.getMonth()):(v.text=h++-s,v.type="next-month",v.year=11===o.getMonth()?o.getFullYear()+1:o.getFullYear(),v.month=11===o.getMonth()?0:o.getMonth()+1),b[y]=e.extend({},v)}return p.firstDayPosition=c,p},_getWeekDayRows:function(){var e=g.daysMin;return e},_getYearRows:function(e){for(var t=10*Math.floor(e/10),a=[[],[],[]],n=0;n<3;n++)for(var r=a[n],i=0;i<4;i++){var l=4*n+i;if(l>9)break;r[i]=t+l}return a},_getMonthRows:function(){for(var e=[[],[],[]],t=g.monthsShort,a=0,n=0;n<t.length;n++){var r=t[n];n%4===0&&0!==n&&a++,e[a].push(r)}return e},_getTimeSpinnerData:function(e){var t=[];switch(e){case"hour":for(var a=0;a<=23;a++)t.push(a);break;case"min":for(var n=0;n<=59;n++)t.push(n);break;case"sec":for(var r=0;r<=59;r++)t.push(r)}return t},_getDateTable:function(e){var t=u._getDateRows(e),a=u._getWeekDayRows(),n=g.type,r="date-range"===n||"datetime-range"===n?"":'style="display:none;"',i='<table cellspacing="0" cellpadding="0" class="gmi-date-table" '+r+"><tbody>";i+="<tr>";for(var l=0;l<a.length;l++)i+="<th>"+a[l]+"</th>";i+="</tr>";for(var o=0;o<t.length;o++){var d=t[o];i+='<tr class="gmi-date-table__row">';for(var s=0;s<d.length;s++){var m=d[s],c=u._getCellClasses(m),p="today"===m.type?g.todaySuffix:m.text;i+='<td data-year="'+m.year+'" data-month="'+m.month+'" class="'+c+'">'+p+"</td>"}i+="</tr>"}return i+="</tbody></table>"},_getYearTable:function(e){for(var t=u._getYearRows(e),a=g.startDate&&r(g.startDate)?g.startDate.getFullYear():null,n=g.endDate&&r(g.endDate)?g.endDate.getFullYear():null,i='<table class="gmi-year-table" style="display:none;"><tbody>',l=0;l<t.length;l++){var o=t[l];i+="<tr>";for(var d=0;d<o.length;d++){var s=o[d],m=!1;a&&s<a&&(m=!0),n&&s>n&&(m=!0);var c=m?"disabled":"",p=e!==s||m?"":"current";i+='<td class="available '+p+" "+c+'"><a class="cell">'+s+"</a></td>"}i+="</tr>"}return i+="</tbody></table>"},_getMonthTable:function(e){for(var t=u._getMonthRows(),a=g.startDate&&r(g.startDate)?g.startDate.getFullYear():null,n=g.startDate&&r(g.startDate)?g.startDate.getMonth():null,i=a&&n?new Date(a,n,1).getTime():null,l=g.endDate&&r(g.endDate)?g.endDate.getFullYear():null,o=g.endDate&&r(g.endDate)?g.endDate.getMonth():null,d=l&&o?new Date(l,o,1).getTime():null,s='<table class="gmi-month-table" style="display:none;"><tbody>',m=0;m<t.length;m++){var c=t[m];s+="<tr>";for(var p=0;p<c.length;p++){var h=c[p],f=!1;i&&new Date(g.yearLabel,4*m+p,1)<i&&(f=!0),d&&new Date(g.yearLabel,4*m+p,1)>d&&(f=!0);var _=f?"disabled":"",D=e!==4*m+p||f?"":"current";s+='<td data-year="'+g.date.getFullYear()+'" data-month="'+(4*m+p)+'" class="'+D+" "+_+'"><a class="cell">'+h+"</a></td>"}s+="</tr>"}return s+="</tbody></table>"},_getTimeSpinner:function(e){for(var t=u._getTimeSpinnerData(e),a='<ul data-role="'+e+'" class="gmi-time-panel__body__item--spinner">',n=0;n<t.length;n++)a+='<li class="gmi-time-panel__body__item--spinner__item">'+t[n]+"</li>";return a+="</ul>"},_echoDateOrTimeIntoInput:function(){var t=g.type;if("datetime"===t){var a=g.$pickerPanel.find(".gmi-date-picker--input"),n=g.$pickerPanel.find(".gmi-time-picker--input"),r=e.formatDate(g.date),i=e.formatDate(g.date,l);a.val(r),n.val(i)}else if("datetime-range"===t){var o,d,s,m,c=g.$pickerPanel.find(".gmi-date-picker--input").filter('[data-role="range-start"]'),u=g.$pickerPanel.find(".gmi-date-picker--input").filter('[data-role="range-end"]'),p=g.$pickerPanel.find(".gmi-time-picker--input").filter('[data-role="range-start"]'),h=g.$pickerPanel.find(".gmi-time-picker--input").filter('[data-role="range-end"]');g.minDate&&g.maxDate?(o=e.formatDate(g.minDate),d=e.formatDate(g.minDate,l),s=e.formatDate(g.maxDate),m=e.formatDate(g.maxDate,l),c.val(o),p.val(d),u.val(s),h.val(m)):(o=e.formatDate(g.date),d=e.formatDate(g.date,l),s=e.formatDate(g.date),m=e.formatDate(g.date,l),c.val(o),p.val(d),u.val(s),h.val(m))}},_echoTimeIntoSpinner:function(t,a){var n=g.type;if("datetime"===n){var r=t&&"object"==typeof t?t.hour:g.date.getHours(),i=t&&"object"==typeof t?t.min:g.date.getMinutes(),l=t&&"object"==typeof t?t.sec:g.date.getSeconds(),o=g.$timePanel.find(".gmi-time-panel__body__item--spinner[data-role=hour]"),d=g.$timePanel.find(".gmi-time-panel__body__item--spinner[data-role=min]"),s=g.$timePanel.find(".gmi-time-panel__body__item--spinner[data-role=sec]"),m=o.children("li").filter(function(){return Number(e(this).text())===r}),c=d.children("li").filter(function(){return Number(e(this).text())===i}),u=s.children("li").filter(function(){return Number(e(this).text())===l}),p=m.outerHeight();if(g.$timePanel.show(),!(m.length>0&&c.length>0&&u.length>0))return;m.addClass("active").siblings().removeClass("active"),c.addClass("active").siblings().removeClass("active"),u.addClass("active").siblings().removeClass("active"),o.parent().scrollTop(r*p),d.parent().scrollTop(i*p),s.parent().scrollTop(l*p)}else if("datetime-range"===n)if("range-start"===a){var h=t&&"object"==typeof t?t.minHour:g.minDate?g.minDate.getHours():g.date.getHours(),f=t&&"object"==typeof t?t.minMin:g.minDate?g.minDate.getMinutes():g.date.getMinutes(),_=t&&"object"==typeof t?t.minSec:g.minDate?g.minDate.getSeconds():g.date.getSeconds(),D=g.$timePanel.filter('[data-role="range-start"]').find(".gmi-time-panel__body__item--spinner[data-role=hour]"),b=g.$timePanel.filter('[data-role="range-start"]').find(".gmi-time-panel__body__item--spinner[data-role=min]"),y=g.$timePanel.filter('[data-role="range-start"]').find(".gmi-time-panel__body__item--spinner[data-role=sec]"),v=D.children("li").filter(function(){return Number(e(this).text())===h}),k=b.children("li").filter(function(){return Number(e(this).text())===f}),w=y.children("li").filter(function(){return Number(e(this).text())===_}),M=v.outerHeight();if(g.$timePanel.filter('[data-role="range-start"]').show(),!(v.length>0&&k.length>0&&w.length>0))return;v.addClass("active").siblings().removeClass("active"),k.addClass("active").siblings().removeClass("active"),w.addClass("active").siblings().removeClass("active"),D.parent().scrollTop(h*M),b.parent().scrollTop(f*M),y.parent().scrollTop(_*M)}else if("range-end"===a){var x=t&&"object"==typeof t?t.maxHour:g.maxDate?g.maxDate.getHours():g.date.getHours(),P=t&&"object"==typeof t?t.maxMin:g.maxDate?g.maxDate.getMinutes():g.date.getMinutes(),C=t&&"object"==typeof t?t.maxSec:g.maxDate?g.maxDate.getSeconds():g.date.getSeconds(),T=g.$timePanel.filter('[data-role="range-end"]').find(".gmi-time-panel__body__item--spinner[data-role=hour]"),S=g.$timePanel.filter('[data-role="range-end"]').find(".gmi-time-panel__body__item--spinner[data-role=min]"),N=g.$timePanel.filter('[data-role="range-end"]').find(".gmi-time-panel__body__item--spinner[data-role=sec]"),F=T.children("li").filter(function(){return Number(e(this).text())===x}),H=S.children("li").filter(function(){return Number(e(this).text())===P}),$=N.children("li").filter(function(){return Number(e(this).text())===C}),Y=F.outerHeight();if(g.$timePanel.filter('[data-role="range-end"]').show(),
!(F.length>0&&H.length>0&&$.length>0))return;F.addClass("active").siblings().removeClass("active"),H.addClass("active").siblings().removeClass("active"),$.addClass("active").siblings().removeClass("active"),T.parent().scrollTop(x*Y),S.parent().scrollTop(P*Y),N.parent().scrollTop(C*Y)}},_getCellClasses:function(e){var t=g.type,a=[];return"normal"===e.type||"today"===e.type&&!e.disabled?(a.push("available"),"today"===e.type&&a.push("today")):a.push(e.type),"date"!==t&&"datetime"!==t||"normal"!==e.type&&"today"!==e.type||Number(e.year)!==g.date.getFullYear()||Number(e.month)!==g.date.getMonth()||Number(e.text)!==g.date.getDate()||a.push("current"),!e.inRange||"date-range"!==t&&"datetime-range"!==t||"normal"!==e.type&&"today"!==e.type||(a.push("in-range"),e.start&&a.push("start-date"),e.end&&a.push("end-date")),e.disabled&&a.push("disabled"),a.join(" ")},_setDate:function(a){var i=g.type,o=g.format;if(a){if(n(a)){if("date-range"===i||"datetime-range"===i){if(a!==g.value){g.date=a.split(" "+g.rangeSeparator+" ");var d=e.parseDate(g.date[0],o),s=e.parseDate(g.date[1],o),m=g.startDate&&r(g.startDate)?g.startDate:null,c=g.endDate&&r(g.endDate)?g.endDate:null;if(m&&(d.getTime()<m.getTime()||s.getTime()<m.getTime())&&(a=""),c&&(d.getTime()>c.getTime()||s.getTime()>c.getTime())&&(a=""),a&&""!==a){if(!(s.getTime()>=d.getTime()))throw new Error("The maximum date must be greater than or equal to the minimum date");g.onChange&&e.isFunction(g.onChange)&&g.onChange.call(g,a,g.value),t.trigger("pick.datepicker",{newDate:a,oldDate:g.value}),g.value=a,g.minDate=d,g.maxDate=s,u._setRangeDateView(g.$pickerPanel),"datetime-range"===i&&(g.$pickerPanel.find('.gmi-date-picker--input[data-role="range-start"]').val(e.formatDate(d)),g.$pickerPanel.find('.gmi-date-picker--input[data-role="range-end"]').val(e.formatDate(s)),g.$pickerPanel.find('.gmi-time-picker--input[data-role="range-start"]').val(e.formatDate(d,l)),g.$pickerPanel.find('.gmi-time-picker--input[data-role="range-end"]').val(e.formatDate(s,l)),g.$pickerPanel.find(".gmi-picker-panel__link-btn--determine").removeClass("disabled")),t.val(a)}else g.date=new Date,g.limitStartDate=new Date}}else if("date"===i||"datetime"===i){var p=g.date,h=p.getTime(),f=e.parseDate(a,o),_=f.getTime();h!==_&&(g.onChange&&e.isFunction(g.onChange)&&g.onChange.call(g,a,e.formatDate(g.date,o)),t.trigger("pick.datepicker",{newDate:a,oldDate:e.formatDate(g.date,o)}),g.value=a,g.date=f,g.yearLabel=f.getFullYear(),g.monthLabel=f.getMonth(),u._setNewDateDOM(g.$pickerPanel,f.getFullYear(),f.getMonth(),f.getDate()),"datetime"===i&&(g.$pickerPanel.find(".gmi-date-picker--input").val(e.formatDate(f)),g.$pickerPanel.find(".gmi-time-picker--input").val(e.formatDate(f,l)),g.$pickerPanel.find(".gmi-picker-panel__link-btn--determine").removeClass("disabled")),t.val(a))}else if("month"===i){var D=e.formatDate(g.date,o),b=a,y=g.date.getTime(),v=new Date(e.parseDate(b,o).getFullYear(),e.parseDate(b,o).getMonth(),1).getTime();v!==y&&(g.onChange&&e.isFunction(g.onChange)&&g.onChange.call(g,b,D),t.trigger("pick.datepicker",{newDate:b,oldDate:D}),e.parseDate(b,o).getFullYear()!==g.date.getFullYear()&&(g.$pickerPanel.find(".gmi-date-picker__header__label--year").text(e.parseDate(b,o).getFullYear()+" "+g.yearSuffix),g.$pickerPanel.find(".gmi-month-table td").attr("data-year",e.parseDate(b,o).getFullYear()).data("year",e.parseDate(b,o).getFullYear())),g.value=a,g.date=new Date(e.parseDate(b,o).getFullYear(),e.parseDate(b,o).getMonth(),1),g.yearLabel=e.parseDate(b,o).getFullYear(),g.monthLabel=e.parseDate(b,o).getMonth(),u._setNewMonthDOM(g.$pickerPanel,e.parseDate(b,o).getMonth()),t.val(b))}else if("year"===i){var k=g.date.getFullYear(),w=10*Math.floor(k/10),M=Number(a),x=10*Math.floor(M/10);k!==M&&(g.onChange&&e.isFunction(g.onChange)&&g.onChange.call(g,a,k),t.trigger("pick.datepicker",{newDate:a,oldDate:k}),g.value=a,g.date=new Date(M,0,1),g.yearLabel=M,w===x?g.$pickerPanel.find(".gmi-year-table td").removeClass("current").filter(function(){return Number(e(this).text())===M}).addClass("current"):u._setNewYearDOM(g.$pickerPanel,M),t.val(M))}}else if(r(a)){if("date-range"===i||"datetime-range"===i)return;var P=e.formatDate(a,o);u._setDate(P)}}else g.date=new Date,g.limitStartDate=new Date,"date-range"===g.type&&"datetime-range"===g.type||(g.yearLabel=g.date.getFullYear(),g.monthLabel=g.date.getMonth())},_setPrevButtonAction:function(e,t){var a,n,r;switch(t){case"dateView":r=g.monthLabel-1<0?11:g.monthLabel-1,n=g.monthLabel-1<0?g.yearLabel-1:g.yearLabel,u._setNewDateDOM(e,n,r),g.yearLabel=n,g.monthLabel=r;break;case"monthView":a=e.find(".gmi-date-picker__header__label--year"),n=g.yearLabel-1,r=g.monthLabel,a.text(n+" "+g.yearSuffix),g.yearLabel=n,u._setNewMonthDOM(e,r);break;case"yearView":n=g.yearLabel-10,u._setNewYearDOM(e,n),g.yearLabel=n}},_setNextButtonAction:function(e,t){var a,n,r;switch(t){case"dateView":r=g.monthLabel+1>11?0:g.monthLabel+1,n=g.monthLabel+1>11?g.yearLabel+1:g.yearLabel,u._setNewDateDOM(e,n,r),g.yearLabel=n,g.monthLabel=r;break;case"monthView":a=e.find(".gmi-date-picker__header__label--year"),n=g.yearLabel+1,r=g.monthLabel,a.text(n+" "+g.yearSuffix),g.yearLabel=n,u._setNewMonthDOM(e,r);break;case"yearView":n=g.yearLabel+10,u._setNewYearDOM(e,n),g.yearLabel=n}},_setNewDateDOM:function(t,a,n,r){var i=u._getDateTable(new Date(a,n,r?r:1)),l=t.find(".gmi-picker-panel__body__main"),o=t.find(".gmi-date-picker__header__label--year"),d=t.find(".gmi-date-picker__header__label--month");o.text(a+" "+g.yearSuffix),d.show().text(g.monthsShort[n]),t.find(".gmi-date-table").remove(),e(i).appendTo(l).show().find("td").removeClass("current").filter(function(){return!e(this).hasClass("prev-month")&&!e(this).hasClass("next-month")&&a===g.date.getFullYear()&&n===g.date.getMonth()&&(e(this).text()===g.todaySuffix?(new Date).getDate():Number(e(this).text()))===g.date.getDate()}).addClass("current")},_setNewYearDOM:function(t,a,n){var r=t.find(".gmi-picker-panel__body__main"),n=n&&n.length>0?n:t.find(".gmi-date-picker__header__label--year"),i=t.find(".gmi-year-table"),l=10*Math.floor(a/10),o=l+9,d=u._getYearTable(a);i.remove(),e(d).appendTo(r).show().find("td").removeClass("current").filter(function(){return!e(this).hasClass("disabled")&&Number(e(this).text())===a}).addClass("current"),t.find(".gmi-year-table").siblings("table").hide(),n.text(l+" "+g.yearSuffix+" - "+o+" "+g.yearSuffix)},_setNewMonthDOM:function(t,a){var n=t.find(".gmi-picker-panel__body__main"),r=t.find(".gmi-month-table"),i=u._getMonthTable(a);r.remove(),e(i).appendTo(n).show(),t.find(".gmi-month-table").siblings("table").hide()},_setYearView:function(a){var n=g.$pickerPanel.find(".gmi-year-table"),r=g.$pickerPanel.find(".gmi-date-picker__header__label--year"),i=g.type,l=Number(a.text());if(n.find("td").removeClass("current"),a.addClass("current"),"date"===i||"datetime"===i||"month"===i)n.hide(),r.text(l+" "+g.yearSuffix),g.yearLabel=l,u._setNewMonthDOM(g.$pickerPanel,g.date.getMonth()),g.currentView="monthView";else if("year"===i){var o=g.date.getTime(),d=new Date(l,0,1).getTime();d!==o&&(g.onChange&&e.isFunction(g.onChange)&&g.onChange.call(g,e.formatDate(new Date(l,0,1),g.format),e.formatDate(g.date,g.format)),g.date=new Date(l,0,1),g.value=l,g.yearLabel=l),t.val(e.formatDate(new Date(l,0,1),g.format)),u._hidePickerPanel()}},_setMonthView:function(a){var n=g.$pickerPanel,r=n.find(".gmi-month-table"),i=g.type,l=g.yearLabel,o=Number(a.data("month"));if(r.find("td").removeClass("current"),a.addClass("current"),"date"===i||"datetime"===i)u._setNewDateDOM(n,l,o),r.hide(),g.currentView="dateView";else if("month"===i){var d=g.date.getTime(),s=new Date(l,o,1).getTime();s!==d&&(g.onChange&&e.isFunction(g.onChange)&&g.onChange.call(g,e.formatDate(new Date(l,o,1),g.format),e.formatDate(g.date,g.format)),g.date=new Date(l,o,1)),g.value=e.formatDate(new Date(l,o,1),g.format),t.val(e.formatDate(new Date(l,o,1),g.format)),u._hidePickerPanel()}g.monthLabel=o},_setRangeDateView:function(t,a){var n,r,i,l,o,d=t.find(".gmi-picker-panel__body__main.f-lt"),s=d.find(".gmi-date-range-picker__body__header > p"),m=t.find(".gmi-picker-panel__body__main.f-rt"),c=m.find(".gmi-date-range-picker__body__header > p"),p=g.limitStartDate;switch(a){case"next-year":n="getNextYear";break;case"next-month":n="getNextMonth";break;case"prev-year":n="getPrevYear";break;case"prev-month":n="getPrevMonth";break;default:n="normal"}r="normal"===n?g.minDate:e[n](p),g.limitStartDate=r,i=e.getNextMonth(r),l=u._getDateTable(r),o=u._getDateTable(i),t.find(".gmi-date-table").remove(),e(l).appendTo(d).show(),e(o).appendTo(m).show(),s.text(r.getFullYear()+" "+g.yearSuffix+" "+g.monthsShort[r.getMonth()]),c.text(i.getFullYear()+" "+g.yearSuffix+" "+g.monthsShort[i.getMonth()])},_setTimeView:function(t,a){var n=a.type,r="keyup"===n?a.which:null;if(""===t.val()&&g.$pickerPanel.find(".gmi-picker-panel__link-btn--determine").addClass("disabled"),"focusin"===n||"change"===n||"keyup"===n&&r&&r===c){var i=""!==t.val()&&e.parseDate(t.val(),l)?e.parseDate(t.val(),l).getHours():0,o=""!==t.val()&&e.parseDate(t.val(),l)?e.parseDate(t.val(),l).getMinutes():0,d=""!==t.val()&&e.parseDate(t.val(),l)?e.parseDate(t.val(),l).getSeconds():0,s=t.data("role"),m={};switch(s){case"date":m.hour=i,m.min=o,m.sec=d;break;case"range-start":m.minHour=i,m.minMin=o,m.minSec=d;break;case"range-end":m.maxHour=i,m.maxMin=o,m.maxSec=d}}u._echoTimeIntoSpinner(m,s)},_echoInputValue:function(t){"date-range"===g.type||"datetime-range"===g.type?u._setDate(t):e.parseDate(t,g.format)&&(u._setDate(e.formatDate(e.parseDate(t,g.format),g.format)),e(this).val(e.formatDate(e.parseDate(t,g.format),g.format)))},_getDatePanelPosition:function(){var e=t[0].offsetTop,a=t[0].offsetLeft;return null!==t[0].offsetParent&&(e+=t[0].offsetParent.offsetTop,a+=t[0].offsetParent.offsetLeft),{top:e,left:a}},_setDatePanelPosition:function(){var e,a,n=t.outerWidth(),r=t.outerHeight(),i=u._getDatePanelPosition();if(g.$pickerPanel.length>0){switch(e=g.$pickerPanel.outerWidth(),g.align){case"left":a=i.left;break;case"center":a=i.left-Math.abs(e-n)/2;break;case"right":a=i.left-Math.abs(e-n)}g.$pickerPanel.css({top:i.top+r+"px",left:a+"px"})}},_clear:function(){var a=g.type,n=g.$pickerPanel,r=n.find(".gmi-picker-panel__link-btn--determine"),i=n.find(".gmi-date-picker__header__label--year");n.find(".gmi-date-picker--input, .gmi-time-picker--input").val(""),r.length>0&&r.addClass("disabled"),""!==g.value&&(g.onChange&&e.isFunction(g.onChange)&&g.onChange.call(g,"",g.value),t.trigger("pick.datepicker",{newDate:"",oldDate:g.value}),t.val(""),g.date=new Date,g.value="",g.yearLabel=g.date.getFullYear(),g.monthLabel=g.date.getMonth()),"date-range"===a||"datetime-range"===a?(n.find(".gmi-date-table td").removeClass("start-date in-range end-date"),g.minDate=null,g.maxDate=null):"year"===a?u._setNewYearDOM(n,g.yearLabel,i):"month"===a?(i.text(g.yearLabel+" "+g.yearSuffix),u._setNewMonthDOM(n,g.monthLabel)):u._setNewDateDOM(n,g.yearLabel,g.monthLabel,(new Date).getDate())},_showPickerPanel:function(){g.$pickerPanel.is(":hidden")&&(g.$pickerPanel.show(),setTimeout(function(){g.$pickerPanel.removeClass("picker-hide").addClass("picker-show"),t.trigger("show.datepicker"),g.onShow&&e.isFunction(g.onShow)&&g.onShow.call(g)},0))},_hidePickerPanel:function(){var a=g.type,n=g.currentView;if(!g.$pickerPanel.is(":hidden"))if("date-range"===a||"datetime-range"===a||"month"===a||"year"===a)g.$pickerPanel.addClass("picker-hide").removeClass("picker-show"),setTimeout(function(){g.$pickerPanel.hide(),t.trigger("hide.datepicker"),g.onHide&&e.isFunction(g.onHide)&&g.onHide.call(g)},100);else{switch(n){case"yearView":g.$pickerPanel.find(".gmi-date-picker__header__label--year").text(g.yearLabel+" "+g.yearSuffix).siblings(".gmi-date-picker__header__label--month").show();break;case"monthView":g.$pickerPanel.find(".gmi-date-picker__header__label--month").show()}g.$pickerPanel.addClass("picker-hide").removeClass("picker-show"),setTimeout(function(){g.$pickerPanel.hide().find(".gmi-date-table").show().siblings("table").hide(),t.trigger("hide.datepicker"),g.onHide&&e.isFunction(g.onHide)&&g.onHide.call(g),g.currentView="dateView"},100)}},_elFocusHandler:function(){u._showPickerPanel()},_elClickHandler:function(e){e.stopPropagation()},_elChangeHandler:function(){var t=e(this).val();u._echoInputValue(t)},_elKeyUpHandler:function(t){var a=t.which,n=e(this).val();a===c&&u._echoInputValue(n)}};g.version="1.0.0",g.setDate=function(e){u._setDate(e)},g.getDate=function(){return g.value},g.show=function(){u._showPickerPanel()},g.hide=function(){u._hidePickerPanel()},g.clear=function(){u._clear()},g.disable=function(e){t.attr("disabled",e),u._hidePickerPanel()},g.destroy=function(){u._unBindEvent(),u._unCreate(),t.removeData("datepicker")},u._init()};g.LANG={},e.fn.datepicker=function(t){var n,r=a(arguments,1),t=t||{},i=this;return i.each(function(){var a,i=e(this).data("datepicker");if(!i){if(/destroy/.test(t))return;return e(this).data("datepicker",i=new g(e(this),t))}"string"==typeof t&&e.isFunction(a=i[t])&&(n=a.apply(i,r))}),"undefined"==typeof n?i:n},e.fn.datepicker.Constructor=g,e.fn.datepicker.lang=g.LANG,e.isLeapYear=function(e){return 0===e%4&&(e%100!==0||e%400===0)},e.getTotalDayCountOfMonth=function(t,a){var n=[31,28,31,30,31,30,31,31,30,31,30,31],r=n[a];return e.isLeapYear(t)&&2===a&&r++,r},e.getWeekDay=function(e,t,a){var a=new Date(e,t-1,a);return a.getDay()},e.getFirstDayOfMonth=function(e){var t=new Date(e.getTime());return t.setDate(1),t.getDay()},e.getStartDateOfMonth=function(e,t){var a=new Date(e,t,1),n=a.getDay();return 0===n?a.setTime(a.getTime()-7*i):a.setTime(a.getTime()-i*n),a},e.getWeekNumber=function(e){var t,a=new Date(e.getTime());return a.setHours(0,0,0,0),a.setDate(a.getDate()+3-(a.getDay()+6)%7),t=new Date(a.getFullYear(),0,4),1+Math.round(((a.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7)},e.getPrevMonth=function(t){var a=t.getFullYear(),n=t.getMonth(),r=t.getDate(),i=new Date,l=0===n?a-1:a,o=0===n?11:n-1,d=e.getTotalDayCountOfMonth(l,o);return i.setMonth(o),i.setFullYear(l),d<r&&i.setDate(d),new Date(i.getTime())},e.getNextMonth=function(t){var a=t.getFullYear(),n=t.getMonth(),r=t.getDate(),i=new Date,l=11===n?a+1:a,o=11===n?0:n+1,d=e.getTotalDayCountOfMonth(l,o);return i.setMonth(o),i.setFullYear(l),d<r&&i.setDate(d),new Date(i.getTime())},e.getPrevYear=function(t){var a=t.getFullYear(),n=t.getMonth(),r=t.getDate(),i=new Date,l=a-1,o=n,d=e.getTotalDayCountOfMonth(l,o);return i.setMonth(o),i.setFullYear(l),d<r&&i.setDate(d),new Date(i.getTime())},e.getNextYear=function(t){var a=t.getFullYear(),n=t.getMonth(),r=t.getDate(),i=new Date,l=a+1,o=n,d=e.getTotalDayCountOfMonth(l,o);return i.setMonth(o),i.setFullYear(l),d<r&&i.setDate(d),new Date(i.getTime())},e.clearHours=function(e){var t=new Date(e);return t.setHours(0,0,0,0),t.getTime()},e.formatDate=function(e,a){return e=new Date(e),isNaN(e.getTime())?null:e?t.format(e,a||"yyyy-MM-dd"):""},e.parseDate=function(e,a){return t.parse(e,a||"yyyy-MM-dd")}},window.jQuery,window.fecha);